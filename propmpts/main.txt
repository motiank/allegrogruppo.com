

> **Goal:** Build a new project named `allegrogruppo.com`
>
> **Tech stack (strict requirements):**
>
> * **Node.js + Express**
> * **React**
> * **JSS (react-jss)**
> * **Vite using esbuild/SWC (NO Babel)**
> * **JavaScript ONLY (NO TypeScript, NO babel config, NO TS config)**
> * **JSX is written inside `.js` files** (do **NOT** create `.jsx` files)

---

### ‚úÖ High-level requirements

1. The site should serve:

   * `index.html` ‚Äî shows a simple list of available landing pages
   * standalone landing pages (separate HTML files, NOT SPA routing)
   * First landing page: `eatalia-bsr.html`

2. The landing pages are loaded **inside an iframe on a remote site**:

   ‚úÖ `https://www.eatalia-market.co.il/`

   Add CSP:

   ```
   Content-Security-Policy: frame-ancestors 'self' https://www.eatalia-market.co.il/ https://*.allegrogruppo.com;
   ```

3. Default language: **Hebrew (RTL)**
   Support also: **English, Arabic**

   * Use i18next + react-i18next
   * Language chosen via `?lang=he|en|ar`
   * If `he` or `ar` ‚Üí set `<html dir="rtl">`, otherwise `ltr`
   * Use JSS logical properties (`paddingInline`, `textAlign: start/end`)

4. All components and pages must be `.js` files and use JSX syntax inside them.

---

### ‚úÖ Landing page: `eatalia-bsr.html`

Sections flow:

1. **Meal Picking**

   * 4 meals: hamburger, schnitzel, chicken salad, pasta
   * Each shown as image tile
   * A play button floats on the **left side** of the image
   * Clicking a meal selects it and **grays out the others**
   * Clicking play opens a video overlay (lazy load the video)

2. **Location section**

   * Fields: `building` (dropdown: C/I/T/Y), `floor`, `office`, `phone`
   * ‚ÄúNext‚Äù enabled only when all inputs valid

3. **Payment section**

   * Placeholder screen: ‚ÄúPayment coming soon‚Äù

4. **Thank You section**

   * Shows order summary (meal, building, etc.)
   * Restart button resets flow

---

### ‚úÖ Analytics

Send event payloads to:

```
POST /api/track
```

And also fire `window.parent.postMessage(...)` so the iframe host site can listen.

Events required:

```
meal_selected
video_opened
location_completed
flow_completed
```

Mask phone number (show only last 4 digits).

---

### ‚úÖ Performance constraints

* MUST use **Vite with esbuild/SWC** (zero Babel usage)
* Separate HTML entry per landing page (multi-page build)
* Tiny bundles ‚Üí aim for < 90KB per landing page
* Lazy load video
* `loading="lazy"` images

---

### ‚úÖ Project structure (Cursor must generate)

```
/server/server.js                  # Express server, serves dist + /api/track
/src
  /pages
    index.js
    eatalia-bsr.js
  /components
    MealCard.js
    OfficeForm.js
    ThankYou.js
    VideoOverlay.js
    LangSwitcher.js
  /i18n
    index.js
    /locales
       he/common.json
       en/common.json
       ar/common.json
  /styles
    theme.js
    global.js
  /utils
    analytics.js
    validations.js
    dir.js
index.html
eatalia-bsr.html
vite.config.js                     # multipage config ‚Äî JS ONLY
package.json
README.md
```

---

### ‚úÖ Deliverables

Cursor should:

1. Create the project structure above
2. Configure Vite for **multiple HTML entry outputs**
3. Make React components in **`.js` files using JSX inside them**
4. Implement i18next with 3 language JSON files
5. Add Express `/api/track` endpoint
6. Ensure CSP supports iframe embedding from `https://www.eatalia-market.co.il/`
7. Ensure RTL/LTR changes dynamically based on selected language

---

### üö® Important rules (repeat to Cursor if needed)

* **NO TypeScript**
* **NO Babel config**
* **NO `.jsx` files** ‚Äî JSX must be inside `.js` files
* **Use Vite (esbuild/SWC)**

---

### ‚úÖ Final instruction to Cursor

> **Generate the full project scaffold now.**
> Create all required files and code.
> After generating, show me how to run it (`npm install`, `npm run dev`).

---




I want to create a new menu file from the bc_sandbox_menu.json under the prompts folder. 
 since our menu is flat please ignore the categories and sub categories. But it is very 
 important to add the different ids  other neccassy fields into our menu . we would like 
 to use it when we push the order into bee com- so please make sure all data is there.


 after recieiving the iframe url and ConfirmationKey
 the order should be submit to the server. on the server side the order should be pushed into a map of ConfirmationKey => order info.
 and only then Iframe url should be set. once pelecard call our server  (the ServerSideGoodFeedbackURL )
 the order info should be extracted from the map and construct the beecom push order payload. 
 Then use the push order beecom api




 I would like to build the dashboard in the admin. 
 the dashboard show the live status of today (in qa - lastweek) .
  the data that should be display is : count of orders , income , average order price,
   kanban of :  orders ,  in prepration, in delivry , losed order .  
   each box in the kanbhan should display the name and order number  ( that customer recieved from the beecom) ,  
   the dshborad is interactive - so order can be drag from one column to the left or right coloumn.
    when dragged the order status should be updated in the data base.  
    through the dahboard the admin can postpond the system for 15 min - or shut it down .  
    when it is postpond the order system should display a page that says  something like we are under load and in order to maintain  a good service .. we will back in [timer clock].